{% extends 'base.html' %}
{% load static %}
{% block title %} Index {% endblock title %}


       

{% block content %}

<!-- Navigation -->
{% include 'base/nav-bar.html' %}



   <!-- Hero Section -->
    

<section class="hero-section py-3 bg-light px-5">
        <div class="">
            <div class="row justify-content-center">
                

                
 
 


 <div class="card bg-primary-subtle px-5">  
    <div class="col-lg-12 text-center">
                    <h1 class="display-5 fw-bold mb-3">Find Your Perfect Rental Home</h1>
                    <p class="lead mb-4">Discover premium properties in the most desirable locations</p>   
    </div>        
<!-- Filter Form -->
<form method="post" class="row g-3 mb-4">
    {% csrf_token %}
    <!-- Region Selector -->
    <div class="col-md-3">
        <label for="region" class="form-label fw-bold">Region</label>
        <select class="form-select shadow-sm" id="region" name="region" onchange="updateTownships()">
            <option value="">All Regions</option>
            {% for region in regions %}
                <option value="{{ region.id }}" {% if request.GET.region == region.id|stringformat:"s" %}selected{% endif %}>
                    {{ region.name }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Township/City Selector -->
    <div class="col-md-3">
        <label for="township" class="form-label fw-bold">Township</label>
        <select class="form-select shadow-sm" id="township" name="township">
            <option value="">All Townships</option>
            {% for city in cities %}
                <option value="{{ city.id }}" 
                    data-region="{{ city.region.id }}"
                    {% if request.GET.township == city.id|stringformat:"s" %}selected{% endif %}>
                    {{ city.name }}
                </option>
            {% endfor %}
        </select>
    </div>

    <!-- Rent Type Selector -->
    <div class="col-md-2">
        <label for="rent_type" class="form-label fw-bold">Rent Type</label>
        <select class="form-select shadow-sm" id="rent_type" name="rent_type">
            <option value="">Any Type</option>
            <option value="MONTH" {% if request.GET.rent_type == "MONTH" %}selected{% endif %}>Per Month</option>
            <option value="WEEK" {% if request.GET.rent_type == "WEEK" %}selected{% endif %}>Per Week</option>
            <option value="DAY" {% if request.GET.rent_type == "DAY" %}selected{% endif %}>Per Day</option>
            <option value="YEAR" {% if request.GET.rent_type == "YEAR" %}selected{% endif %}>Per Year</option>
        </select>
    </div>

    <!-- Property Type Selector -->
    <div class="col-md-2">
        <label for="property_type" class="form-label fw-bold">Property Type</label>
        <select class="form-select shadow-sm" id="property_type" name="property_type">
            <option value="">Any Type</option>
            <option value="APARTMENT" {% if request.GET.property_type == "APARTMENT" %}selected{% endif %}>Apartment</option>
            <option value="HOUSE" {% if request.GET.property_type == "HOUSE" %}selected{% endif %}>House</option>
            <option value="CONDO" {% if request.GET.property_type == "CONDO" %}selected{% endif %}>Condo</option>
            <option value="HOSTEL" {% if request.GET.property_type == "HOSTEL" %}selected{% endif %}>Hostel</option>
        </select>
    </div>


    <!-- Bedrooms Selector -->
     {% comment %}
    <div class="col-md-1">
        <label for="bedrooms" class="form-label fw-bold">Beds</label>
        <select class="form-select shadow-sm" id="bedrooms" name="beds">
            <option value="">Any</option>
            <option value="1" {% if request.GET.beds == "1" %}selected{% endif %}>1</option>
            <option value="2" {% if request.GET.beds == "2" %}selected{% endif %}>2</option>
            <option value="3" {% if request.GET.beds == "3" %}selected{% endif %}>3</option>
            <option value="4" {% if request.GET.beds == "4" %}selected{% endif %}>4+</option>
        </select>
    </div>
    {% endcomment %}

    <!-- Submit Button -->
    <div class="col-md-1 d-flex align-items-end">
        <button type="submit" class="btn  btn-sm btn-primary w-100 shadow-sm">
            <i class="bi bi-search"></i> Search
        </button>
    </div>
</form>
</div>  

{% comment %}
<!-- Reset Filters Button -->
<div class="d-flex justify-content-end mb-4">
    <a href="?" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-counterclockwise me-2"></i>Reset Filters
    </a>
</div>
{% endcomment %}

<!-- JavaScript for Township Filtering -->
<script>
    function updateTownships() {
        const regionSelect = document.getElementById('region');
        const townshipSelect = document.getElementById('township');
        const selectedRegionId = regionSelect.value;
        
        // Reset township options
        for (let i = 0; i < townshipSelect.options.length; i++) {
            const option = townshipSelect.options[i];
            option.style.display = 'block';
            
            // Skip the "All Townships" option
            if (option.value === '') continue;
            
            // Hide townships that don't match the selected region
            if (selectedRegionId && option.dataset.region !== selectedRegionId) {
                option.style.display = 'none';
            }
        }
        
        // Reset township selection if it doesn't match the region
        const selectedTownship = townshipSelect.value;
        if (selectedTownship) {
            const selectedOption = townshipSelect.options[townshipSelect.selectedIndex];
            if (selectedOption.dataset.region !== selectedRegionId) {
                townshipSelect.value = '';
            }
        }
    }
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateTownships();
    });
</script>


            </div>
        </div>
    </div>
</section>





    
    <!-- Search-Properties -->
     
     {% include 'searched-property.html' %}

     
     
    <!-- Featured Properties -->
    {% include 'feature-properties.html' %}




 
<!-- Footer -->
{% include 'base/footer.html' %}

{% endblock content %}